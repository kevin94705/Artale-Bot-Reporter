# 專案模組化重構說明

## 重構原因

原本的 `Artale_Bot_Reporter.py` 檔案有 902 行程式碼，包含了太多不同功能的類別，違反了軟體工程的最佳實踐原則：

1. **單一職責原則 (SRP)** - 一個檔案應該只有一個變更的理由
2. **關注點分離** - 不同功能應該分開管理
3. **程式碼可維護性** - 大檔案難以維護和理解
4. **模組化設計** - 便於測試和重複使用

## 新的專案結構

```
Artale_Bot_Reporter_PY/
├── main.py                    # 主程式入口
├── config.py                  # 配置管理
├── data_manager.py           # 資料處理
├── packet_processor.py       # 封包解析
├── video_recorder.py         # 視頻錄製
├── ui/                       # UI 模組
│   ├── __init__.py
│   ├── player_monitor.py     # 玩家監控UI
│   └── recording_tab.py      # 錄影UI
├── Artale_Bot_Reporter.py    # 原始檔案（保留）
└── 其他檔案...
```

## 各模組職責

### 1. `config.py` - 配置管理
- 統一管理所有應用程式常數
- 網路設定、檔案路徑、UI設定等
- 易於修改和維護配置

### 2. `data_manager.py` - 資料處理
- 載入和儲存使用者配置
- 韓文-中文翻譯功能
- 資料檔案操作

### 3. `packet_processor.py` - 封包解析
- 網路封包處理
- 玩家資訊提取
- 封包資料解析

### 4. `video_recorder.py` - 視頻錄製
- 視窗錄製功能
- 檔案管理和分割
- 編碼和壓縮處理

### 5. `ui/player_monitor.py` - 玩家監控UI
- 玩家監控介面
- 表格顯示和操作
- 封包監聽啟動

### 6. `ui/recording_tab.py` - 錄影UI
- 錄影控制介面
- 視窗選擇和設定
- 錄製狀態管理

### 7. `main.py` - 主程式入口
- 應用程式初始化
- 整合各個模組
- 主視窗管理

## 優點

### 1. **更好的程式碼組織**
- 每個檔案職責單一，易於理解
- 相關功能集中管理
- 程式碼結構清晰

### 2. **更容易維護**
- 修改某個功能時只需要編輯對應檔案
- 降低程式碼耦合度
- 減少修改錯誤的風險

### 3. **更好的測試性**
- 每個模組可以獨立測試
- 更容易編寫單元測試
- 問題定位更精確

### 4. **更好的重複使用性**
- 模組可以在其他專案中重複使用
- 功能組件化
- 更靈活的組合方式

### 5. **更好的協作性**
- 多人開發時減少衝突
- 可以分工負責不同模組
- 版本控制更清晰

## 使用方式

### 執行程式
```bash
python main.py
```

### 匯入模組範例
```python
from config import Config
from data_manager import DataManager
from ui import PlayerMonitorTab, RecordingTab
```

## 注意事項

1. **保持向後相容性** - 原始的 `Artale_Bot_Reporter.py` 仍然保留
2. **測試充分性** - 所有現有測試仍然有效
3. **文檔更新** - 相關文檔需要更新以反映新結構
4. **打包腳本** - 可能需要更新打包配置以包含新檔案

## 下一步建議

1. **逐步遷移** - 可以逐漸將功能從舊檔案遷移到新結構
2. **添加類型提示** - 為所有公共介面添加完整的類型提示
3. **文檔完善** - 為每個模組添加詳細的API文檔
4. **測試擴展** - 為新的模組結構添加更多測試案例 